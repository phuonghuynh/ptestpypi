machine:
  python:
    version: 2.7

  environment:
    PROCESSING_URL: https://api-staging.finix.io/

dependencies:
  override:
    - python setup.py develop

deployment:
  release:
    branch: staged
    owner: phuonghuynh
    commands:
     - git config user.name "Sexy Deploybot"
     - git config user.email "dev@phuonghuynh.com"
     - git remote prune origin
     - git checkout master && git pull -a && git checkout staged
     - python setup.py sdist
     - twine register dist/*.whl -u $PYPI_USERNAME -p $PYPI_PASSWORD
     - twine upload dist/* -u $PYPI_USERNAME -p $PYPI_PASSWORD
